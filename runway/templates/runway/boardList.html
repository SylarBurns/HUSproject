{% extends 'mainPage/basePage.html' %}
{% block content %}
<!DOCTYPE html>
<html>
    <head>
        {% load static %}
        <link rel="stylesheet" type="text/css" href="{% static 'runway/Style.css'%}">   
        <meta charset="UTF-8">
        <title> boardList </title>
    </head>

    <body>
        <h2 class="boardName"> 활주로 </h2>
        <h4 class="boardName"> 활주로입니다</h4>
       {% if post_list %}
       <table width=80% height=30%>
        <tr>
        <th>#</th>
        <th>분류</th>
        <th width="50%">제목</th>
        <th>글쓴이</th>
        <th>조회수</th>
        <th>날짜</th>
        <th>현황</th>
        </tr>
        {% for post in post_list %}<!-- post 객체들을 상대로 for문 돌림 -->
        <tr>
            <td>{{post.pk}}</td>
            {% if post.RWboardType == "General" %}<!--일반, 찬반 토론에 따라서 분류를 다르게 줌-->
            <th>일반토론</th>
            {%else%}
            <th>찬반토론</th>
            {%endif%}
            <td><a href="{% url 'runway:runwayDetail' post.pk %}">{{post.title}}</a></td>
            {% for Relation in post.post_relation.all %} <!--각 post 객체들에게 연결되어있는 PostRelation 객체들을 상대로 for문을 돌림-->
                {% if Relation.isWriter %}<!--Relation을 보고 작성자인지 확인-->
                    {% if Relation.annonimity %}
                    <td>{{Relation.annoName}}</td><!--Relation을 보고 익명인지 확인-->
                    {% else %}
                    <td>{{Relation.user.nickName}}</td>
                    {% endif %}
                {% endif %}
            {% endfor %}
            <td>{{post.hitCount}}</td>
            <td>{{post.pubDate}}</td>
            {% if post.RWboardType == "General" %}<!--일반, 찬반 토론에 따라서 투표결과 혹은 좋아요 싫어요 갯수를 줌-->
            <td>좋아요: {{post.likeCount }}<br> 싫어요: {{post.dislikeCount }}</td>
            {%else%}
            <td>찬성: {{post.forCount }}<br> 반대: {{post.againstCount }} <br>중립: {{post.neutralCount}}</td>
            {%endif%}
        </tr>
        {% endfor %}<!-- post 객체들을 상대로 for문 돌리기 마침 -->
        </table>
        {% else %}
        <h3>아직 게시물이 없습니다. 첫번째 게시물의 주인공이 되어주세요! </h3>
        {% endif %}

       <button style="position: absolute; right:20%;"><a href="{% url 'runway:runwayCreate' %}">글쓰기</a></button>  
        <!--글쓰기 버튼-->
    </body>
<html>
{% endblock %}